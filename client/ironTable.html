<template name="ironTable">
    <div class="container iron-table-container">
        <h3>
            {{#if showBackButton}}
                <a class="btn btn-link" onclick="window.history.back()">
                    <i class="fa fa-chevron-circle-left fa-lg"></i>
                </a>
            {{/if}}

            {{tableTitle}}
        </h3>

        {{#if newRecordPath}}
            <span class="new-record">
                <a class="btn btn-success btn-sm" title="{{newRecordTooltip}}" rel='tooltip' data-placement="bottom"
                    href="{{pathFor newRecordPath}}">
                    {{newRecordTitle}} <i class="fa fa-plus-square fa-lg"></i> 
                </a>
            </span>
        {{/if}}

        {{#if showFilter}}
            {{> ironTableFilter}}
        {{/if}}

        {{#if loading}}
            <div class="loading">
                {{> spinner}}
            </div>
        {{else}}
            {{#if haveData}}

                <div class="clearfix"></div>

                {{> ironTableNav}}

                <table class="table table-striped table-hover table-condensed">
                    <thead>
                        <tr>
                            {{#each headers}}
                                {{#unless hide}}
                                    {{> ironTableHeader}}
                                {{/unless}}
                            {{/each}}
                            <th class="controls-header">

                            </th>
                        </tr>
                    </thead>

                    <tbody>
                        {{#each records}}
                            <tr>
                                {{> ironTableRow}}
                            </tr>
                        {{/each}}
                    </tbody>

                </table>

            {{else}}
                <div class="alert alert-warning">No {{capitalize recordsName}} !</div>
            {{/if}}
        {{/if}}
    </div>
</template>

<template name="ironTableFilter">
    <div class="ironTableFilter pull-right">

        <span class="filter">
            <form class="form-inline" role="form">
                <div class="form-group">
                    <select class="form-control" id="filter-column">
                        <option value="_none_">No Filter</option>
                        {{#each headers}}
                            {{#if canFilterOn}}
                                <option value="{{key}}" selected="{{#if filterOnThisCol}}selected{{/if}}">
                                    {{capitalize colName}}
                                </option>
                            {{/if}}
                        {{/each}}
                    </select>
                </div>
                <div class="form-group">
                    <input type="text" id="filter-value" class="form-control" 
                        placeholder="Text to filter on" value="{{filterValue}}" />
                </div>
                <div class="form-group">

                </div>
            </form>
        </span>
    </div>
</template>


<template name="ironTableNav">
    <div class="pull-left">
        <strong>Displaying {{recordDisplayStart}} - {{recordDisplayStop}} out of {{recordCount}} {{recordsName}}</strong>
    </div>

    <div class="pull-right">
        <a class="btn btn-default btn-sm {{previousPathClass}}" href="{{previousPath}}"
            title="previous record set" rel='tooltip'>
            <i class="fa fa-chevron-left"></i>
        </a> 
        <a class="btn btn-default btn-sm {{nextPathClass}}" href="{{nextPath}}"
            title="next record set" rel='tooltip'>
            <i class="fa fa-chevron-right"></i>
        </a>
    </div>


</template>

<template name="ironTableHeader">
    <th class="{{column.class}}">
        <a class="table-col-head" href="?sort_on={{dataKey}}&sort_direction={{sortDirection}}"
            title="{{#if sort}}Reverse sort order{{else}}Sort on {{capitalize colName}}{{/if}}"
            rel='tooltip'>
            {{capitalize colName}} 
            {{#if sort}}<i class="fa fa-chevron-circle-{{#if desc}}down{{else}}up{{/if}}"></i>{{/if}}
        </a>
    </th>
</template>

<template name="ironTableRow">
    {{#each colData}}
        <td class="{{column.class}}">
            {{#if aLink}}
                <a href="{{aLink}}" title="{{#if title}}{{title}}{{/if}}" rel='tooltip'>
                    {{#if template}}
                        {{> templateRow}}
                    {{else}}
                        {{{value}}}
                    {{/if}}
                </a>
            {{else}}
                {{#if template}}
                    {{> templateRow}}
                {{else}}
                    {{{value}}}
                {{/if}}
            {{/if}}
        </td>
    {{/each}}
    <td class="controls">
        {{#if extraControls}}{{> extraControls }}{{/if}}
        {{#if editOk}}
            <a class="btn btn-link iron-table-edit-record" title='Edit Record' rel='tooltip'>
                <i class="fa fa-pencil-square-o"></i>
            </a>            
        {{/if}}
        {{#if deleteOk}}
            <a class="btn btn-link iron-table-delete-record" title='Delete Record' rel='tooltip'>
                <i class="fa fa-trash-o"></i>
            </a>            
        {{/if}}
    </td>
</template>

<template name="ironTableLoading">
    <div class="ironTableLoading">
        {{>spinner}}
    </div>
</template>




