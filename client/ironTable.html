
<template name="ironTable">
    <div class="iron-table-container">

    {{#if inabox}}
      <div class="panel panel-default">
        <div class="panel-heading">
          {{> ironTableHeading}}
        </div>
        
        <div class="panel-body">
          {{#if showFilter}}
            {{> ironTableFilter}}
          {{/if}}
        </div>

        {{#if loading}}
          <div class="loading">
            {{> spinner}}
          </div>
        {{else}}

          {{#if haveData}}
                  
            {{> ironTableNav}}
            <table class="table table-striped table-hover table-condensed">
                <thead>
                    <tr>
                        {{> ironTableHeaders}}
                    </tr>
                </thead>

                <tbody>
                    {{> ironTableRecords}}
                </tbody>
            </table>

          {{else}}
              <div class="well well-sm"><i>No {{recordsName}}!</i></div>
          {{/if}}

        {{/if}}
      </div>

    {{else}}

        {{> ironTableHeading}}
        
        {{#if showFilter}}
          {{> ironTableFilter}}
        {{/if}}

        {{#if loading}}
            <div class="loading">
                {{> spinner}}
            </div>
        {{else}}

             <div class="clearfix"></div>

            {{#if haveData}}
                
                {{> ironTableNav}}
                <table class="table table-striped table-hover table-condensed clearfix">
                    <thead>
                        <tr>
                            {{> ironTableHeaders}}
                        </tr>
                    </thead>

                    <tbody>
                        {{> ironTableRecords}}
                    </tbody>
                </table>

            {{else}}
                <div class="well well-sm"><i>No {{recordsName}}!</i></div>
            {{/if}}
        {{/if}}

      {{/if}}
    </div>
</template>


<template name="ironTableHeading">
  <div class="iron-table-heading">
    <h3>
        {{#if showBackButton}}
            <a class="btn btn-link" onclick="window.history.back()">
                <i class="fa fa-chevron-circle-left fa-lg"></i>
            </a>
        {{/if}}

        {{tableTitle}}
    </h3>

    <span class="links">
        {{#if doDownloadLink}}
            <button id="download-link" class="btn btn-primary btn-sm" 
                title="Download CSV of {{tableTitle}}" rel='tooltip' data-placement="bottom">
                <i class="fa fa-cloud-download fa-lg"></i> Download
            </button>
        {{/if}}

        {{#if newRecordRoute}}
            <a class="btn btn-success btn-sm" title="{{newRecordTooltip}}" rel='tooltip' data-placement="bottom"
                href="{{pathFor newRecordRoute}}">
                {{newRecordTitle}} <i class="fa fa-plus-square fa-lg"></i> 
            </a>
        {{else}}
            {{#if showNewButton}}
                <button id="iron-table-new-record" class="btn btn-success btn-sm" title="{{newRecordTooltip}}" rel='tooltip' data-placement="bottom">
                {{newRecordTitle}} <i class="fa fa-plus-square fa-lg"></i> 
                </button>
            {{/if}}
        {{/if}}
    </span>
  </div>
</template>

<template name="ironTableHeaders">
    {{#each headers}}
        {{#unless hide}}
            {{> ironTableHeader}}
        {{/unless}}
    {{/each}}
    <th class="controls-header">

    </th>
</template>

<template name="ironTableRecords">
    {{#each records}}
        <tr>
            {{> ironTableRow}}
        </tr>
    {{/each}}
</template>

<template name="ironTableFilter">
  <div class="iron-table-filter">
      <span class="filter">
          <form class="form-inline" role="form">
              <div class="form-group">
                  <select class="form-control" id="filter-column">
                      <option value="_none_">No Filter</option>
                      {{#each headers}}
                          {{#if canFilterOn}}
                              <option value="{{key}}" selected="{{#if filterOnThisCol}}selected{{/if}}">
                                  {{capitalize colName}}
                              </option>
                          {{/if}}
                      {{/each}}
                  </select>
              </div>
              <div class="form-group">
                  <input type="text" id="filter-value" class="form-control" 
                      placeholder="Text to filter on" value="{{filterValue}}" />
              </div>
          </form>
      </span>
  </div>
</template>


<template name="ironTableNav">
    <div class="iron-table-pager-display">
        <strong>Displaying {{recordDisplayStart}} - {{recordDisplayStop}} out of {{recordCount}} {{recordsName}}</strong>
    </div>

    <div class="iron-table-pager">
        <button id="previous" class="btn btn-default btn-sm {{previousPathClass}}"
            title="previous record set" rel='tooltip' data-placement="left">
            <i class="fa fa-chevron-left"></i>
        </button> 
        <button id="next" class="btn btn-default btn-sm {{nextPathClass}}"
            title="next record set" rel='tooltip' data-placement="left">
            <i class="fa fa-chevron-right"></i>
        </button>
    </div>
</template>


<template name="ironTableHeader">
    <th class="{{column.class}}">
        {{#if noSort}}
            <button class="btn btn-link table-col-head" disabled="disabled">
                {{capitalize colName}} 
            </button>
        {{else}}
        <button class="btn btn-link table-col-head" 
            title="{{#if sort}}Reverse sort order{{else}}Sort on {{capitalize colName}}{{/if}}"
            rel='tooltip'>
            {{capitalize colName}} 
            {{#if sort}}
                <i class="fa fa-chevron-circle-{{#if desc}}down{{else}}up{{/if}}"></i>
            {{/if}}
        </button>
        {{/if}}
    </th>
</template>


<template name="ironTableRow">
  {{#each colData}}
    <td class="{{column.class}}">
        {{#if aLink}}
            <a href="{{aLink}}" title="{{#if title}}{{title}}{{/if}}" rel='tooltip' target="{{column.target}}">
                {{#if template}}
                    {{> templateRow}}
                {{else}}
                  <div class="iron-table-value" 
                  contenteditable="{{column.contenteditable}}">{{{value}}}</div>
                {{/if}}
            </a>
        {{else}}
            {{#if template}}
                {{> templateRow}}
            {{else}}
              <div class="iron-table-value"
              contenteditable="{{column.contenteditable}}">{{{value}}}</div>
            {{/if}}
        {{/if}}
    </td>
  {{/each}}
  <td class="controls">
    {{#if extraControls}}{{> extraControls }}{{/if}}
    {{#if editOk}}
        <a href="{{editRoute}}" class="btn btn-link iron-table-edit-record" 
          title='Edit Record' rel='tooltip'>
          <i class="fa fa-pencil-square-o"></i>
        </a>            
    {{/if}}
    {{#if deleteOk}}
        <a class="btn btn-link iron-table-delete-record" title='Delete Record' rel='tooltip'>
            <i class="fa fa-trash-o"></i>
        </a>            
    {{/if}}
  </td>
</template>


<template name="ironTableLoading">
    <div class="ironTableLoading">
        {{>spinner}}
    </div>
</template>




