
<template name="ironTable">
    <div class="iron-table-container {{tableClass}}">

      {{#if inabox}}

        <div class="box">
          
          {{> ironTableHeading}}
          
          {{#if showFilter}}
            {{> ironTableFilter}}
          {{/if}}

          {{#if loading}}
            <div class="loading">
              {{> spinner}}
            </div>
          {{else}}

            {{#if haveData}}

              {{> ironTableNav}}
              
              <div class="table-container">
                <table class="centered striped hoverable">
                  <thead>
                    <tr>
                      {{> ironTableHeaders}}
                    </tr>
                  </thead>

                  <tbody class="{{rowLink}}" data-link="{{dataLink}}">
                      {{> ironTableRecords}}
                  </tbody>
                </table>
              </div>
              
            {{else}}
                <div class="card-panel">
                  <i>No {{recordsName}}!</i>
                </div>
            {{/if}}

          {{/if}}
          
        </div>

      {{else}}

        {{> ironTableHeading}}

        {{#if showFilter}}
          {{> ironTableFilter}}
        {{/if}}

        {{#if loading}}
          <div class="loading">
            {{> spinner}}
          </div>
        {{else}}

             <div class="clearfix"></div>

            {{#if haveData}}

                {{> ironTableNav}}
               
                <div class="table-container">
                  <table class="centered striped hoverable">
                      <thead>
                          <tr>
                              {{> ironTableHeaders}}
                          </tr>
                      </thead>

                      <tbody  class="{{rowLink}}" data-link="{{dataLink}}">
                          {{> ironTableRecords}}
                      </tbody>
                  </table>
                </div>

            {{else}}
                <div class="well well-sm"><i>No {{recordsName}}!</i></div>
            {{/if}}
        {{/if}}

      {{/if}}
    </div>
</template>


<template name="ironTableHeading">
  <div class="iron-table-heading">
    <h3 class="truncate">
      {{#if showBackButton}}
          <a class="btn-flat waves-effect waves-light back-btn" onclick="window.history.back()"><i class="mdi-navigation-chevron-left"></i></a>
      {{/if}}

      {{{tableTitle}}}
      {{#if subTitle}}
        <small>{{{subTitle}}}</small>
      {{/if}}
    </h3>

    <span class="links">
        {{#if doDownloadLink}}
          <button id="download-link" class="btn btn-sm blue waves-effect waves-light">
            <i class="mdi-file-cloud-download left"></i> Download
          </button>
        {{/if}}

        {{#if newRecordRoute}}
            <a class="btn btn-sm green waves-effect waves-light" href="{{pathFor newRecordRoute}}">
              {{newRecordTitle}} <i class="mdi-file-cloud-download right"></i>
            </a>
        {{else}}
          {{#if showNewButton}}
            <button id="iron-table-new-record" class="btn btn-sm green waves-effect waves-light">
              {{newRecordTitle}} <i class="mdi-file-cloud-download right"></i>
            </button>
          {{/if}}
        {{/if}}
    </span>
  </div>
</template>

<template name="ironTableHeaders">
    {{#each headers}}
        {{#unless hide}}
            {{> ironTableHeader}}
        {{/unless}}
    {{/each}}
    <th class="controls-header">

    </th>
</template>

<template name="ironTableRecords">
    {{#each records}}
        <tr>
            {{> ironTableRow}}
        </tr>
    {{/each}}
</template>

<template name="ironTableFilter">
  <div class="iron-table-filter row">
    
    <div class="offset-s4 col s4">
      <select id="filter-column">
        <option value="_none_">No Filter</option>
        {{#each headers}}
          {{#if canFilterOn}}
            <option value="{{key}}" selected="{{#if filterOnThisCol}}selected{{/if}}">{{capitalize colName}}</option>
          {{/if}}
        {{/each}}
      </select>
    </div>

    <div class="col s4 filter-value-col">
      <input type="{{filterType}}" id="filter-value" class="form-control"
          placeholder="Text to filter on" value="{{filterValue}}" checked="{{checked}}" />
    </div>
     
  </div> 
    
 
</template>


<template name="ironTableNav">
  <div class="row valign-wrapper iron-table-nav">
    {{#if showPager}}
      <div class="iron-table-pager-display col s8 left-align valign">
        <b>
          Displaying {{recordDisplayStart}} - {{recordDisplayStop}} out of {{recordCount}} {{recordsName}}
        </b>
      </div>

      <div class="col s4 iron-table-pager right-align valign">
        <a href="" id="previous" class="btn-flat waves-effect {{previousPathClass}}">
            <i class="mdi-navigation-chevron-left"></i>
        </a>
        <a href="" id="next" class="btn-flat waves-effect {{nextPathClass}}">
            <i class="mdi-navigation-chevron-right"></i>
        </a>
      </div>
    {{else}}
      <div class="col s8 iron-table-pager-display left-align valign">
        <strong>{{recordCount}} {{recordsName}}</strong>
      </div>
    {{/if}}
  </div>
</template>


<template name="ironTableHeader">
    <th class="{{column.class}}">
        {{#if noSort}}
            <button class="btn-flat waves-effect table-col-head" disabled="disabled">
                {{capitalize colName}}
            </button>
        {{else}}
        <button class="btn-flat waves-effect table-col-head tooltipped"
            data-tooltip="{{#if sort}}Reverse sort order{{else}}Sort on {{capitalize colName}}{{/if}}"
            rel='tooltip'>
            {{capitalize colName}}
            {{#if sort}}
                <i class="mdi-navigation-arrow-drop-{{#if desc}}down{{else}}up{{/if}}"></i>
            {{/if}}
        </button>
        {{/if}}
    </th>
</template>


<template name="ironTableRow">
  {{#each colData}}
    <td class="{{column.class}} {{rowLinkSkip}}">
        {{#if aLink}}
            <a href="{{aLink}}" class="{{#if title}}tooltipped{{/if}}" data-tooltip="{{#if title}}{{title}}{{/if}}" rel='{{#if title}}tooltip{{/if}}' target="{{column.target}}">
                {{#if template}}
                    {{> templateRow}}
                {{else}}
                  <div class="iron-table-value"
                  contenteditable="{{contenteditable}}">{{{value}}}</div>
                {{/if}}
            </a>
        {{else}}
            {{#if template}}
                {{> templateRow}}
            {{else}}
              <div class="iron-table-value"
              contenteditable="{{contenteditable}}">{{{value}}}</div>
            {{/if}}
        {{/if}}
    </td>
  {{/each}}
  <td class="controls rowlink-skip">

    {{#if showJSON}}
      <button type="button" class="btn-flat waves-effect tooltipped" 
        style="white-space: nowrap;" 
        rel="popover"
        data-tooltip="Record Object"
        data-container="body"
        data-html=true
        data-toggle="popover" 
        data-position="left" 
        data-content="{{json}}"
        data-template="{{ironPopupTemplate}}"
        >
        <i class="fmdi-action-description" data-tooltip="Show Record" rel="tooltip"></i>
      </button>
    {{/if}}

    {{#if extraControls}}{{> extraControls }}{{/if}}

    {{#if editOk}}
        <a href="{{editRoute}}" class="btn-flat waves-effect iron-table-edit-record tooltipped"
          data-tooltip='Edit Record' rel='tooltip'>
          <i class="mdi-editor-mode-edit"></i>
        </a>
    {{/if}}

    {{#if deleteOk}}
        <a class="btn-flat waves-effect iron-table-delete-record" data-tooltip='Delete Record' rel='tooltip'>
            <i class="mdi-action-delete"></i>
        </a>
    {{/if}}

  </td>
</template>

<template name="ironPopup">
  <div class="popover iron-table-popover" role="tooltip">
    <div class="arrow"></div>
    <h3 class="popover-title"></h3>
    <div class="popover-content"></div>
  </div>
</template>

<template name="ironTableLoading">
    <div class="ironTableLoading">
        {{>spinner}}
    </div>
</template>
